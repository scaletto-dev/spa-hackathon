# Form UI Components - Design System

## üìã T·ªïng Quan

Th∆∞ vi·ªán form components ƒë∆∞·ª£c thi·∫øt k·∫ø theo chu·∫©n **Design System** v·ªõi focus v√†o:

-   ‚úÖ **UX/UI ƒë·∫πp m·∫Øt**, nh·∫•t qu√°n, chuy√™n nghi·ªáp
-   ‚úÖ **Accessibility (A11y)** compliant - WCAG AA
-   ‚úÖ **Mobile-first** responsive design
-   ‚úÖ **Keyboard navigation** ƒë·∫ßy ƒë·ªß
-   ‚úÖ **Screen reader** friendly
-   ‚úÖ **Realtime validation** v·ªõi animation m∆∞·ª£t m√†

## üé® Design Tokens

### K√≠ch Th∆∞·ªõc

-   **Input height**: `h-11` (mobile), `h-12` (desktop)
-   **Padding horizontal**: `px-3.5`
-   **Border radius**: `rounded-xl`
-   **Spacing**: `mb-5` (mobile), `md:mb-6` (desktop)

### M√†u S·∫Øc (Brand Colors)

```tsx
// Border
border-gray-300/80          // Default
border-gray-400             // Hover
border-pink-500             // Focus
ring-2 ring-pink-500/30     // Focus ring

// States
border-red-500 ring-red-200       // Error
border-emerald-500 ring-emerald-200  // Success
opacity-60 cursor-not-allowed    // Disabled

// Text
text-gray-900      // Value
text-gray-400      // Placeholder
text-gray-700      // Label
text-gray-500      // Help text
```

## üì¶ Components

### 1. FormField (Wrapper)

Container component cho label, control, help text, v√† error messages.

```tsx
import { FormField } from '@/components/ui';

<FormField label='H·ªç v√† t√™n' name='fullName' error={errors.fullName} helpText='Nh·∫≠p h·ªç t√™n ƒë·∫ßy ƒë·ªß c·ªßa b·∫°n' required>
    {/* Your control here */}
</FormField>;
```

**Props:**

-   `label?`: string - Nh√£n field
-   `name`: string - T√™n field (required)
-   `error?`: string - Th√¥ng b√°o l·ªói
-   `helpText?`: string - VƒÉn b·∫£n h∆∞·ªõng d·∫´n
-   `success?`: string - Th√¥ng b√°o th√†nh c√¥ng
-   `info?`: string - Th√¥ng tin th√™m
-   `required?`: boolean - Hi·ªÉn th·ªã d·∫•u \*
-   `children`: ReactNode - Control component

### 2. Input

Text input v·ªõi t√≠nh nƒÉng format t·ª± ƒë·ªông (phone, number).

```tsx
import { Input } from '@/components/ui';
import { MailIcon, PhoneIcon } from 'lucide-react';

// Text Input
<Input
  name="email"
  type="email"
  placeholder="example@email.com"
  value={email}
  onChange={(e) => setEmail(e.target.value)}
  leftIcon={MailIcon}
/>

// Phone v·ªõi auto-format
<Input
  name="phone"
  type="tel"
  placeholder="0912 345 678"
  value={phone}
  onChange={(e) => setPhone(e.target.value)}
  leftIcon={PhoneIcon}
  mask="phone"
/>

// Number v·ªõi format ngh√¨n
<Input
  name="budget"
  type="text"
  placeholder="5,000,000"
  value={budget}
  onChange={(e) => setBudget(e.target.value)}
  mask="number"
/>
```

**Props:**

-   `name`: string
-   `type?`: string - input type
-   `placeholder?`: string
-   `value?`: string | number
-   `onChange?`: (e) => void
-   `error?`: string
-   `disabled?`: boolean
-   `leftIcon?`: LucideIcon
-   `rightIcon?`: LucideIcon
-   `onRightIconClick?`: () => void
-   `mask?`: 'phone' | 'number' - Auto-format khi blur
-   `data-testid?`: string

**Format Rules:**

-   **Phone**: `0912 345 678` ho·∫∑c `(+84) 912 345 678`
-   **Number**: `5,000,000` (nh√≥m ngh√¨n theo locale VN)

### 3. Textarea

Auto-resize textarea v·ªõi character counter.

```tsx
import { Textarea } from '@/components/ui';

<Textarea
    name='notes'
    placeholder='Nh·∫≠p ghi ch√∫...'
    value={notes}
    onChange={(e) => setNotes(e.target.value)}
    showCounter
    maxLength={500}
    autoResize
/>;
```

**Props:**

-   `name`: string
-   `placeholder?`: string
-   `value?`: string
-   `onChange?`: (e) => void
-   `error?`: string
-   `disabled?`: boolean
-   `showCounter?`: boolean - Hi·ªÉn th·ªã X/Y
-   `autoResize?`: boolean - T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh chi·ªÅu cao
-   `maxLength?`: number
-   `data-testid?`: string

**Features:**

-   Min height: `120px`
-   Max height: `40vh` (khi auto-resize)
-   Counter position: bottom-right

### 4. Select (Single)

Dropdown select v·ªõi t√¨m ki·∫øm, nh√≥m options, keyboard navigation.

```tsx
import { Select, SelectOption, SelectGroup } from '@/components/ui';

// Simple options
const options: SelectOption[] = [
    { value: 'facial', label: 'ChƒÉm s√≥c da m·∫∑t' },
    { value: 'laser', label: 'Laser Hair Removal', disabled: true },
];

<Select
    name='service'
    value={service}
    onChange={setService}
    options={options}
    placeholder='Ch·ªçn d·ªãch v·ª•...'
    searchable
    emptyText='Kh√¥ng t√¨m th·∫•y d·ªãch v·ª•'
/>;

// Grouped options
const groups: SelectGroup[] = [
    {
        label: 'D·ªãch v·ª• da m·∫∑t',
        options: [
            { value: 'facial-1', label: 'ChƒÉm s√≥c c∆° b·∫£n' },
            { value: 'facial-2', label: 'ChƒÉm s√≥c n√¢ng cao' },
        ],
    },
    {
        label: 'C√¥ng ngh·ªá Laser',
        options: [{ value: 'laser-1', label: 'Laser Hair Removal' }],
    },
];

<Select name='service' value={service} onChange={setService} groups={groups} searchable />;
```

**Props:**

-   `name`: string
-   `value?`: string
-   `onChange`: (value: string) => void
-   `options?`: SelectOption[]
-   `groups?`: SelectGroup[]
-   `placeholder?`: string
-   `error?`: string
-   `disabled?`: boolean
-   `searchable?`: boolean
-   `loading?`: boolean
-   `emptyText?`: string
-   `data-testid?`: string

**Keyboard Navigation:**

-   `‚Üì` / `‚Üë`: Di chuy·ªÉn trong danh s√°ch
-   `Enter`: Ch·ªçn option
-   `Esc`: ƒê√≥ng dropdown
-   `Tab`: ƒê√≥ng v√† chuy·ªÉn field

### 5. MultiSelect

Multiple selection v·ªõi tags, search, clear all.

```tsx
import { MultiSelect, SelectOption } from '@/components/ui';

const options: SelectOption[] = [
    { value: 'oily', label: 'Da d·∫ßu' },
    { value: 'dry', label: 'Da kh√¥' },
    { value: 'combo', label: 'Da h·ªón h·ª£p' },
];

<MultiSelect
    name='skinType'
    value={skinTypes}
    onChange={setSkinTypes}
    options={options}
    placeholder='Ch·ªçn lo·∫°i da...'
    maxSelections={3}
    searchable
/>;
```

**Props:**

-   T∆∞∆°ng t·ª± `Select` nh∆∞ng:
-   `value?`: string[]
-   `onChange`: (value: string[]) => void
-   `maxSelections?`: number - Gi·ªõi h·∫°n s·ªë l·ª±a ch·ªçn

**Features:**

-   Tag chips v·ªõi n√∫t X ƒë·ªÉ xo√°
-   Clear All button
-   Visual feedback khi ƒë·∫°t max selections
-   Checkbox trong dropdown

### 6. DatePicker

Calendar picker v·ªõi quick picks, disable past dates.

```tsx
import { DatePicker } from '@/components/ui';

<DatePicker
    name='appointmentDate'
    value={date}
    onChange={setDate}
    placeholder='dd/mm/yyyy'
    disablePastDates
    quickPicks
    minDate={new Date()}
    maxDate={new Date(2025, 11, 31)}
/>;
```

**Props:**

-   `name`: string
-   `value?`: Date | null
-   `onChange`: (date: Date | null) => void
-   `placeholder?`: string
-   `error?`: string
-   `disabled?`: boolean
-   `minDate?`: Date
-   `maxDate?`: Date
-   `disablePastDates?`: boolean
-   `quickPicks?`: boolean
-   `data-testid?`: string

**Features:**

-   Quick picks: "H√¥m nay", "Ng√†y mai", "Cu·ªëi tu·∫ßn"
-   Month navigation v·ªõi ‚Üê ‚Üí
-   Highlight ng√†y h√¥m nay v·ªõi border
-   Disable dates kh√¥ng h·ª£p l·ªá

### 7. TimePicker

Time slot picker v·ªõi interval tu·ª≥ ch·ªânh.

```tsx
import { TimePicker } from '@/components/ui';

<TimePicker
    name='appointmentTime'
    value={time}
    onChange={setTime}
    placeholder='Ch·ªçn gi·ªù...'
    startTime='09:00'
    endTime='20:00'
    interval={30}
    disabledSlots={['12:00', '12:30', '18:00']}
/>;
```

**Props:**

-   `name`: string
-   `value?`: string (format "HH:MM")
-   `onChange`: (time: string) => void
-   `placeholder?`: string
-   `error?`: string
-   `disabled?`: boolean
-   `startTime?`: string - Default "09:00"
-   `endTime?`: string - Default "20:00"
-   `interval?`: number - Minutes, default 30
-   `disabledSlots?`: string[] - Disabled times
-   `data-testid?`: string

**Features:**

-   Auto-scroll to selected time khi m·ªü
-   Disabled slots hi·ªÉn th·ªã v·ªõi "(ƒê√£ ƒë·∫ßy)"
-   Line-through cho slots kh√¥ng available

### 8. Radio & Checkbox

Standard radio v√† checkbox v·ªõi hit area l·ªõn.

```tsx
import { Radio, Checkbox } from '@/components/ui';

// Radio Group
<div className="space-y-3">
  <Radio
    name="gender"
    value="male"
    label="Nam"
    checked={gender === 'male'}
    onChange={(e) => setGender(e.target.value)}
  />
  <Radio
    name="gender"
    value="female"
    label="N·ªØ"
    checked={gender === 'female'}
    onChange={(e) => setGender(e.target.value)}
  />
</div>

// Checkbox
<Checkbox
  name="subscribe"
  label="Nh·∫≠n tin t·ª©c qua email"
  checked={subscribe}
  onChange={(e) => setSubscribe(e.target.checked)}
/>
```

**Props:**

-   `name`: string
-   `value?`: string (for radio)
-   `label`: string
-   `checked?`: boolean
-   `onChange?`: (e) => void
-   `error?`: string
-   `disabled?`: boolean
-   `data-testid?`: string

### 9. Toggle

Modern toggle switch cho boolean values.

```tsx
import { Toggle } from '@/components/ui';

<Toggle name='notifications' label='Nh·∫≠n nh·∫Øc h·∫πn qua SMS' checked={notifications} onChange={setNotifications} />;
```

**Props:**

-   `name`: string
-   `checked`: boolean
-   `onChange`: (checked: boolean) => void
-   `label?`: string
-   `disabled?`: boolean
-   `data-testid?`: string

**Features:**

-   Smooth animation v·ªõi Framer Motion
-   Gradient background khi ON
-   Width: 44px (w-11), Height: 24px (h-6)

## üéØ Usage Examples

### Complete Form Example

```tsx
import { useState } from 'react';
import { FormField, Input, Select, DatePicker, TimePicker, Checkbox } from '@/components/ui';

function BookingForm() {
    const [formData, setFormData] = useState({
        name: '',
        email: '',
        service: '',
        date: null,
        time: '',
        acceptTerms: false,
    });

    const [errors, setErrors] = useState({});

    const handleSubmit = (e) => {
        e.preventDefault();
        // Validation logic
        // API call
    };

    return (
        <form onSubmit={handleSubmit} className='space-y-6'>
            <FormField label='H·ªç v√† t√™n' name='name' error={errors.name} required>
                <Input
                    name='name'
                    placeholder='Nh·∫≠p h·ªç t√™n'
                    value={formData.name}
                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                    error={errors.name}
                />
            </FormField>

            <FormField label='Ch·ªçn d·ªãch v·ª•' name='service' error={errors.service} required>
                <Select
                    name='service'
                    value={formData.service}
                    onChange={(value) => setFormData({ ...formData, service: value })}
                    options={serviceOptions}
                    error={errors.service}
                />
            </FormField>

            <div className='grid md:grid-cols-2 gap-6'>
                <FormField label='Ch·ªçn ng√†y' name='date' required>
                    <DatePicker
                        name='date'
                        value={formData.date}
                        onChange={(date) => setFormData({ ...formData, date })}
                        disablePastDates
                    />
                </FormField>

                <FormField label='Ch·ªçn gi·ªù' name='time' required>
                    <TimePicker
                        name='time'
                        value={formData.time}
                        onChange={(time) => setFormData({ ...formData, time })}
                    />
                </FormField>
            </div>

            <Checkbox
                name='acceptTerms'
                label='T√¥i ƒë·ªìng √Ω v·ªõi ƒëi·ªÅu kho·∫£n s·ª≠ d·ª•ng'
                checked={formData.acceptTerms}
                onChange={(e) => setFormData({ ...formData, acceptTerms: e.target.checked })}
            />

            <button
                type='submit'
                className='w-full py-4 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-semibold'
            >
                ƒê·∫∑t l·ªãch ngay
            </button>
        </form>
    );
}
```

## ‚ôø Accessibility (A11y)

### Labels & ARIA

-   M·ªçi control ƒë·ªÅu c√≥ `label` li√™n k·∫øt b·∫±ng `htmlFor`
-   Error messages c√≥ `aria-invalid` v√† `aria-describedby`
-   Select/MultiSelect c√≥ `role="combobox"`, `role="listbox"`
-   C√°c state ƒë∆∞·ª£c announce v·ªõi `aria-live="polite"`

### Keyboard Support

| Component  | Keys            | Action          |
| ---------- | --------------- | --------------- |
| All Inputs | Tab / Shift+Tab | Navigate        |
| Select     | ‚Üì‚Üë              | Move in list    |
| Select     | Enter           | Select option   |
| Select     | Esc             | Close dropdown  |
| DatePicker | ‚Üê ‚Üí             | Navigate months |
| Toggle     | Space           | Toggle on/off   |

### Focus Management

-   Focus ring r√µ r√†ng: `focus:ring-2 focus:ring-pink-500/30`
-   Kh√¥ng gi·∫≠t layout (d√πng ring thay box-shadow)
-   Focus visible cho keyboard users

### Contrast

-   Text: `text-gray-900` tr√™n `bg-white` - ‚úÖ WCAG AA
-   Placeholder: `text-gray-400` - ‚úÖ WCAG AA
-   Error: `text-red-600` - ‚úÖ WCAG AA

## üì± Responsive Design

### Breakpoints

```tsx
// Mobile-first
h-11 px-3.5 mb-5          // < 768px

// Desktop
md:h-12 md:mb-6           // ‚â• 768px
```

### Grid Layout

```tsx
// 2 columns tr√™n desktop
<div className='grid md:grid-cols-2 gap-6'>
    <FormField>...</FormField>
    <FormField>...</FormField>
</div>
```

### Mobile Keyboard

-   `type="email"` ‚Üí Email keyboard
-   `type="tel"` ‚Üí Phone keypad
-   `type="number"` ‚Üí Number keyboard
-   `inputMode="numeric"` ‚Üí Numeric only

## üß™ Testing

M·ªçi component ƒë·ªÅu c√≥ `data-testid`:

```tsx
// Test v·ªõi @testing-library/react
import { render, screen, fireEvent } from '@testing-library/react';

test('input accepts text', () => {
    render(<Input name='test' data-testid='test-input' />);
    const input = screen.getByTestId('test-input');
    fireEvent.change(input, { target: { value: 'Hello' } });
    expect(input.value).toBe('Hello');
});

test('select opens dropdown on click', () => {
    render(<Select name='test' options={options} />);
    const select = screen.getByTestId('test');
    fireEvent.click(select);
    expect(screen.getByRole('listbox')).toBeInTheDocument();
});
```

## üöÄ Demo & Showcase

Xem to√†n b·ªô components ho·∫°t ƒë·ªông t·∫°i:

```
/form-showcase
```

Route n√†y hi·ªÉn th·ªã:

-   ‚úÖ T·∫•t c·∫£ form controls
-   ‚úÖ Validation examples
-   ‚úÖ State management
-   ‚úÖ Error handling
-   ‚úÖ Success states
-   ‚úÖ Disabled states
-   ‚úÖ Grid layouts

## üìù Microcopy Guidelines

### Labels

-   R√µ r√†ng, ng·∫Øn g·ªçn: "H·ªç v√† t√™n", "Email", "S·ªë ƒëi·ªán tho·∫°i"
-   Kh√¥ng d√πng placeholder l√†m label

### Placeholders

-   V√≠ d·ª• c·ª• th·ªÉ: "Nguy·ªÖn VƒÉn A", "example@email.com"
-   Format mong mu·ªën: "0912 345 678", "dd/mm/yyyy"

### Help Text

-   H∆∞·ªõng d·∫´n ng·∫Øn: "Ch√∫ng t√¥i s·∫Ω li√™n h·ªá ƒë·ªÉ x√°c nh·∫≠n"
-   Gi·∫£i th√≠ch format: "ƒê·ªãnh d·∫°ng t·ª± ƒë·ªông khi nh·∫≠p"

### Error Messages

-   Gi·ªçng ƒëi·ªáu th√¢n thi·ªán: "Vui l√≤ng nh·∫≠p email h·ª£p l·ªá"
-   Kh√¥ng vi·∫øt hoa: "VUI L√íNG..." ‚ùå
-   C·ª• th·ªÉ: "Email kh√¥ng h·ª£p l·ªá" thay v√¨ "L·ªói"

### Empty States

-   C√≥ √Ω nghƒ©a: "Kh√¥ng t√¨m th·∫•y d·ªãch v·ª•"
-   H∆∞·ªõng d·∫´n: "Vui l√≤ng ch·ªçn c∆° s·ªü tr∆∞·ªõc"

## üéâ Acceptance Criteria

-   ‚úÖ T·∫•t c·∫£ inputs c√≥ label + help/error text
-   ‚úÖ Focus ring r√µ r√†ng, nh·∫•t qu√°n
-   ‚úÖ Hover/focus/disabled/error states ƒë·∫ßy ƒë·ªß
-   ‚úÖ Select c√≥ search, keyboard nav, empty state
-   ‚úÖ Date/time picker ch·∫∑n gi√° tr·ªã invalid
-   ‚úÖ Validation realtime kh√¥ng gi·∫≠t layout
-   ‚úÖ Mobile touch-friendly (min 44x44px)
-   ‚úÖ Screen reader friendly
-   ‚úÖ WCAG AA contrast
-   ‚úÖ Kh√¥ng console errors
-   ‚úÖ Kh√¥ng ph√° v·ª° layout hi·ªán c√≥

## üìÇ File Structure

```
src/components/ui/
‚îú‚îÄ‚îÄ FormField.tsx       # Wrapper component
‚îú‚îÄ‚îÄ Input.tsx           # Text input v·ªõi mask
‚îú‚îÄ‚îÄ Textarea.tsx        # Auto-resize textarea
‚îú‚îÄ‚îÄ Select.tsx          # Single select dropdown
‚îú‚îÄ‚îÄ MultiSelect.tsx     # Multiple selection
‚îú‚îÄ‚îÄ DatePicker.tsx      # Calendar picker
‚îú‚îÄ‚îÄ TimePicker.tsx      # Time slot picker
‚îú‚îÄ‚îÄ RadioCheckbox.tsx   # Radio & Checkbox
‚îú‚îÄ‚îÄ Toggle.tsx          # Toggle switch
‚îî‚îÄ‚îÄ index.ts            # Exports
```

## üîó Dependencies

```json
{
    "framer-motion": "^11.x",
    "lucide-react": "^0.x",
    "react": "^18.x",
    "react-dom": "^18.x"
}
```

---

**Designed & Built by AI FE Dev** üé®‚ú®
