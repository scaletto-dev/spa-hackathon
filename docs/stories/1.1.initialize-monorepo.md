# Story 1.1: Initialize Monorepo with Frontend and Backend Apps

<!-- Powered by BMAD™ Core -->

## Status
**Draft**

---

## Story

**As a** developer,  
**I want** to set up a monorepo structure with separate frontend and backend applications,  
**so that** I can develop and manage both codebases efficiently in a single repository.

---

## Acceptance Criteria

1. Repository created with monorepo structure using standard folder layout (apps/, packages/, prisma/, docs/)
2. Frontend app initialized in `apps/frontend/` with Vite + React + TypeScript
3. Backend app initialized in `apps/backend/` with Node.js + Express + TypeScript
4. Shared packages created: `packages/types/`, `packages/config/`, `packages/utils/`
5. Package.json scripts configured for running both apps concurrently (e.g., `npm run dev`)
6. TypeScript configured for both apps with strict mode enabled
7. ESLint and Prettier configured with shared config in `packages/config/`
8. .gitignore configured to exclude node_modules, .env, dist, build directories
9. README.md created with project overview and setup instructions
10. Both apps can start successfully (frontend on :5173, backend on :3000)

---

## Tasks / Subtasks

### Phase 1: Repository Structure Setup (AC: 1, 4)
- [ ] **Task 1.1: Initialize Git repository and create root package.json**
  - [ ] Run `git init` to initialize Git repository
  - [ ] Create root `package.json` with workspaces configuration for npm workspaces
  - [ ] Set `"workspaces": ["apps/*", "packages/*"]` in root package.json
  - [ ] Add project name, version, and description in root package.json
  - [ ] Set `"private": true` in root package.json (monorepo best practice)
  - [ ] Add basic scripts: `"dev"`, `"build"`, `"test"`, `"lint"`

- [ ] **Task 1.2: Create monorepo folder structure** (AC: 1, 4)
  - [ ] Create `apps/` directory for applications
  - [ ] Create `packages/` directory for shared code
  - [ ] Create `prisma/` directory for database schema and migrations
  - [ ] Create `docs/` directory (if not exists) for documentation
  - [ ] Create shared packages: `packages/types/`, `packages/config/`, `packages/utils/`
  - [ ] Add package.json to each shared package with proper naming (@spa-hackathon/types, etc.)

- [ ] **Task 1.3: Configure .gitignore** (AC: 8)
  - [ ] Create `.gitignore` in root directory
  - [ ] Add `node_modules/` to gitignore
  - [ ] Add `.env`, `.env.local`, `.env.*.local` to gitignore
  - [ ] Add `dist/`, `build/`, `.next/`, `.vite/` to gitignore
  - [ ] Add IDE-specific files (`.vscode/`, `.idea/`, `*.swp`, `*.swo`)
  - [ ] Add OS-specific files (`.DS_Store`, `Thumbs.db`)
  - [ ] Add log files (`*.log`, `npm-debug.log*`, `yarn-debug.log*`)

### Phase 2: Frontend App Setup (AC: 2, 6, 10)
- [ ] **Task 2.1: Initialize frontend app with Vite + React + TypeScript** (AC: 2)
  - [ ] Navigate to `apps/` directory
  - [ ] Run `npm create vite@latest frontend -- --template react-ts` to create frontend app
  - [ ] Verify `apps/frontend/` contains Vite + React + TypeScript setup
  - [ ] Update frontend package.json name to `@spa-hackathon/frontend`
  - [ ] Verify Vite config exists at `apps/frontend/vite.config.ts`

- [ ] **Task 2.2: Configure TypeScript for frontend** (AC: 6)
  - [ ] Update `apps/frontend/tsconfig.json` with strict mode: `"strict": true`
  - [ ] Configure path aliases: `"@/*": ["./src/*"]`
  - [ ] Set `"target": "ES2020"` and `"module": "ESNext"`
  - [ ] Enable `"esModuleInterop": true` and `"skipLibCheck": true`
  - [ ] Add `"jsx": "react-jsx"` for React 18

- [ ] **Task 2.3: Update Vite configuration** (AC: 10)
  - [ ] Configure Vite dev server port to 5173 (default) in `vite.config.ts`
  - [ ] Add path alias resolution for `@` pointing to `./src`
  - [ ] Configure proxy for backend API: `/api` → `http://localhost:3000`
  - [ ] Verify Vite configuration matches architecture specification
  - [ ] Reference: [Source: architecture/tech-stack.md#vite-configuration-highlights]

### Phase 3: Backend App Setup (AC: 3, 6, 10)
- [ ] **Task 3.1: Initialize backend app with Node.js + Express + TypeScript** (AC: 3)
  - [ ] Create `apps/backend/` directory
  - [ ] Initialize package.json: `npm init -y` in `apps/backend/`
  - [ ] Update package.json name to `@spa-hackathon/backend`
  - [ ] Install dependencies: `npm install express dotenv`
  - [ ] Install dev dependencies: `npm install -D typescript @types/node @types/express ts-node nodemon`
  - [ ] Create `apps/backend/src/` directory for source code

- [ ] **Task 3.2: Configure TypeScript for backend** (AC: 6)
  - [ ] Run `npx tsc --init` in `apps/backend/` to create tsconfig.json
  - [ ] Set `"target": "ES2020"` and `"module": "commonjs"`
  - [ ] Enable strict mode: `"strict": true`
  - [ ] Configure `"outDir": "./dist"` and `"rootDir": "./src"`
  - [ ] Enable `"esModuleInterop": true`, `"skipLibCheck": true`, `"resolveJsonModule": true`
  - [ ] Set `"moduleResolution": "node"`

- [ ] **Task 3.3: Create basic Express server** (AC: 3, 10)
  - [ ] Create `apps/backend/src/server.ts` with Express app setup
  - [ ] Configure Express to listen on PORT 3000 (from environment or default)
  - [ ] Add basic route: `GET /` returning `{ message: "API Server Running" }`
  - [ ] Add health check route: `GET /health` returning `{ status: "ok" }`
  - [ ] Configure Express middleware: `express.json()`

- [ ] **Task 3.4: Add backend development scripts** (AC: 10)
  - [ ] Add `"dev": "nodemon --watch src --ext ts --exec ts-node src/server.ts"` to package.json
  - [ ] Add `"build": "tsc"` script
  - [ ] Add `"start": "node dist/server.js"` script
  - [ ] Create `.env.example` with `PORT=3000`

### Phase 4: Linting & Code Quality (AC: 7)
- [ ] **Task 4.1: Set up ESLint configuration in shared package** (AC: 7)
  - [ ] Create `packages/config/eslint-config/` directory
  - [ ] Install ESLint in config package: `@typescript-eslint/eslint-plugin`, `@typescript-eslint/parser`
  - [ ] Create `.eslintrc.js` in `packages/config/eslint-config/`
  - [ ] Configure TypeScript rules, import rules, and React rules (for frontend)
  - [ ] Export config as npm package `@spa-hackathon/eslint-config`

- [ ] **Task 4.2: Set up Prettier configuration in shared package** (AC: 7)
  - [ ] Create `packages/config/prettier-config/` directory
  - [ ] Install Prettier in config package
  - [ ] Create `.prettierrc.js` with project formatting standards
  - [ ] Configure: `semi: true`, `singleQuote: true`, `printWidth: 100`, `tabWidth: 2`
  - [ ] Export config as npm package `@spa-hackathon/prettier-config`

- [ ] **Task 4.3: Apply ESLint and Prettier to frontend and backend** (AC: 7)
  - [ ] Install `@spa-hackathon/eslint-config` in `apps/frontend/`
  - [ ] Install `@spa-hackathon/prettier-config` in `apps/frontend/`
  - [ ] Install `@spa-hackathon/eslint-config` in `apps/backend/`
  - [ ] Install `@spa-hackathon/prettier-config` in `apps/backend/`
  - [ ] Create `.eslintrc.js` in both apps extending shared config
  - [ ] Create `.prettierrc.js` in both apps extending shared config
  - [ ] Add `"lint"` script to both apps: `eslint . --ext .ts,.tsx`
  - [ ] Add `"format"` script to both apps: `prettier --write \"src/**/*.{ts,tsx}\"`

### Phase 5: Root Scripts & Integration (AC: 5, 10)
- [ ] **Task 5.1: Configure concurrent execution of both apps** (AC: 5)
  - [ ] Install `concurrently` in root: `npm install -D concurrently`
  - [ ] Add `"dev"` script to root package.json: `concurrently \"npm run dev -w @spa-hackathon/frontend\" \"npm run dev -w @spa-hackathon/backend\"`
  - [ ] Add `"build"` script: `npm run build -w @spa-hackathon/frontend && npm run build -w @spa-hackathon/backend`
  - [ ] Add `"lint"` script: `npm run lint -ws`
  - [ ] Add `"format"` script: `npm run format -ws`

- [ ] **Task 5.2: Verify both apps start successfully** (AC: 10)
  - [ ] Run `npm install` in root to install all workspace dependencies
  - [ ] Run `npm run dev` in root
  - [ ] Verify frontend starts on `http://localhost:5173`
  - [ ] Verify backend starts on `http://localhost:3000`
  - [ ] Test frontend loads React app successfully
  - [ ] Test backend health endpoint: `curl http://localhost:3000/health`
  - [ ] Verify no errors in console logs

### Phase 6: Documentation (AC: 9)
- [ ] **Task 6.1: Create comprehensive README.md** (AC: 9)
  - [ ] Create root `README.md` with project title and description
  - [ ] Add "Prerequisites" section: Node.js 20 LTS, npm 10+, Git 2.40+
  - [ ] Add "Installation" section with step-by-step setup instructions
  - [ ] Add "Running the Application" section with `npm run dev` command
  - [ ] Document folder structure and monorepo organization
  - [ ] Add "Development Scripts" section explaining all npm scripts
  - [ ] Add "Technology Stack" overview linking to architecture docs
  - [ ] Include troubleshooting section for common setup issues

- [ ] **Task 6.2: Create environment variable templates** (AC: 9)
  - [ ] Create `.env.example` in `apps/frontend/` with frontend env vars
  - [ ] Create `.env.example` in `apps/backend/` with backend env vars (PORT=3000)
  - [ ] Document all environment variables in README.md
  - [ ] Add instructions for copying `.env.example` to `.env`

### Phase 7: Final Verification
- [ ] **Task 7.1: Final smoke test and verification** (AC: 1-10)
  - [ ] Run `npm install` from clean state
  - [ ] Run `npm run dev` and verify both apps start
  - [ ] Run `npm run lint` and verify no errors
  - [ ] Run `npm run format` and verify code formatting
  - [ ] Verify Git repository initialized with proper .gitignore
  - [ ] Verify TypeScript compilation works for both apps
  - [ ] Commit initial monorepo setup to Git
  - [ ] Tag commit as `v0.1.0-monorepo-init`

---

## Dev Notes

### Monorepo Architecture Overview
**Source:** [architecture/high-level-architecture.md#repository-structure]

The project uses **npm workspaces** for monorepo management (Node.js native, zero additional tooling). This provides:
- **Type Sharing:** Shared TypeScript interfaces between frontend and backend
- **Atomic Changes:** Single PR can update API and frontend simultaneously
- **Local Development:** Single `npm install` at root sets up entire project
- **Simplicity:** No additional tools like Lerna, Turborepo, or Nx required for MVP

### Technology Stack Requirements
**Source:** [architecture/tech-stack.md#technology-stack-table]

**Frontend Stack:**
- **Build Tool:** Vite 5.0+ (NOT Create React App)
- **Framework:** React 18.2+
- **Language:** TypeScript 5.3+
- **Package Manager:** npm 10+

**Backend Stack:**
- **Runtime:** Node.js 20 LTS
- **Framework:** Express.js 4.18+
- **Language:** TypeScript 5.3+
- **Package Manager:** npm 10+

**Development Tools:**
- **Linting:** ESLint 8.55+ + Prettier 3.1+
- **Type Checking:** TypeScript Compiler 5.3+ with strict mode

### Project Structure Specification
**Source:** [architecture/high-level-architecture.md#package-organization]

```
root/
├── apps/
│   ├── frontend/                # React + Vite frontend application
│   │   ├── src/
│   │   │   ├── components/      # Reusable UI components
│   │   │   │   ├── ui/          # Basic UI elements (Button, Input, etc.)
│   │   │   │   ├── features/    # Business logic components
│   │   │   │   └── common/      # Shared layout components
│   │   │   ├── pages/           # Route-level components
│   │   │   ├── hooks/           # Custom React hooks
│   │   │   ├── services/        # API integration layer
│   │   │   ├── utils/           # Helper functions and utilities
│   │   │   ├── types/           # TypeScript type definitions
│   │   │   └── styles/          # Global styles and Tailwind config
│   │   └── public/              # Static assets
│   ├── backend/                 # Node.js + Express backend API
│   │   ├── src/
│   │   │   ├── controllers/     # Request/response handling
│   │   │   ├── middleware/      # Request processing middleware
│   │   │   ├── models/          # Database models and schemas
│   │   │   ├── routes/          # API route definitions
│   │   │   ├── services/        # Business logic layer
│   │   │   ├── utils/           # Utility functions
│   │   │   ├── config/          # Configuration files
│   │   │   └── types/           # TypeScript type definitions
│   │   └── logs/                # Application logs (production)
├── packages/
│   ├── types/                   # Shared TypeScript interfaces
│   ├── config/                  # Shared ESLint/Prettier configs
│   └── utils/                   # Shared utilities
├── prisma/                      # Database schema (to be added in Story 1.3)
├── docs/                        # Project documentation
└── package.json                 # Root workspace configuration
```

### Vite Configuration Requirements
**Source:** [architecture/tech-stack.md#vite-configuration-highlights]

The `apps/frontend/vite.config.ts` MUST include:
1. **React Plugin:** `@vitejs/plugin-react`
2. **Path Aliases:** `@` → `./src`
3. **Dev Server Port:** 5173 (Vite default)
4. **API Proxy:** `/api` → `http://localhost:3000` (backend)
5. **Build Output:** `dist/` directory
6. **Source Maps:** Enabled for debugging

**Why Vite:**
- 10-100x faster HMR than CRA/Webpack
- Instant server start (<1s vs 30-60s CRA)
- Native ESM support
- Automatic code splitting

### TypeScript Configuration
**Source:** [architecture/tech-stack.md#type-checking]

Both apps MUST have:
- **Strict Mode:** `"strict": true` (catches more errors at compile-time)
- **Module:** `"ESNext"` (frontend), `"commonjs"` (backend)
- **Target:** `"ES2020"` (modern JavaScript features)
- **ES Module Interop:** `"esModuleInterop": true`
- **Skip Lib Check:** `"skipLibCheck": true` (faster compilation)

### Port Configuration
**Source:** Story Requirements + Architecture

- **Frontend (Vite):** Port 5173 (Vite default)
- **Backend (Express):** Port 3000 (configurable via env var)
- **Backend Health Check:** `GET /health` → `{ status: "ok" }`

### Shared Package Strategy
**Source:** [architecture/high-level-architecture.md#shared-code-strategy]

Create three shared packages:
1. **@spa-hackathon/types:** API interfaces, data models, enums
2. **@spa-hackathon/config:** ESLint, Prettier, TypeScript configs
3. **@spa-hackathon/utils:** Date formatting, validation helpers

These packages enable code sharing between frontend and backend without duplication.

### Git Configuration
No specific guidance found in architecture docs. Standard .gitignore recommended:
- node_modules/, .env files, dist/, build/, IDE files, OS files

### Testing Standards
**Source:** [architecture/tech-stack.md#frontend-testing]

For this story (infrastructure setup), no tests required. Testing will be added in future stories.
- **Frontend:** Jest 29.7+ + React Testing Library 14.1+
- **Backend:** Jest 29.7+ + Supertest 6.3+

### Environment Variables
No specific env vars required for this story beyond:
- Backend: `PORT=3000` (optional, defaults to 3000)
- Frontend: Uses Vite defaults

### Success Criteria Verification
1. ✅ Folder structure matches specification above
2. ✅ `npm install` from root installs all dependencies
3. ✅ `npm run dev` starts both apps concurrently
4. ✅ Frontend accessible at `http://localhost:5173`
5. ✅ Backend accessible at `http://localhost:3000`
6. ✅ Backend health check responds successfully
7. ✅ TypeScript compiles without errors in both apps
8. ✅ ESLint runs without errors
9. ✅ Prettier formats code correctly
10. ✅ Git repository initialized with proper .gitignore

### Key Constraints
- MUST use npm workspaces (not Lerna, Turborepo, or Nx)
- MUST use Vite (not Create React App or Webpack)
- MUST use TypeScript with strict mode
- MUST configure ESLint + Prettier with shared configs
- Backend MUST run on port 3000 by default
- Frontend MUST run on port 5173 (Vite default)

### Previous Story Context
No previous stories exist. This is the first story (1.1) in Epic 1.

---

## Testing

### Testing Requirements for This Story
**Source:** Story scope analysis

This story focuses on **infrastructure setup only**. No functional code requiring tests.

**Testing Verification:**
- ✅ Manual verification that both apps start successfully
- ✅ Manual verification of health check endpoint (`curl http://localhost:3000/health`)
- ✅ Manual verification of TypeScript compilation
- ✅ Manual verification of linting and formatting

**Future Stories:** Testing framework setup occurs in later stories when implementing business logic.

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-28 | 1.0 | Initial story creation | Bob (Scrum Master) |

---

## Dev Agent Record

_This section will be populated by the development agent during implementation._

### Agent Model Used
_To be filled by dev agent_

### Debug Log References
_To be filled by dev agent_

### Completion Notes
_To be filled by dev agent_

### File List
_To be filled by dev agent_

---

## QA Results

_This section will be populated by QA Agent after implementation review._
