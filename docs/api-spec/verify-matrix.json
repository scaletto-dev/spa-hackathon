{
  "metadata": {
    "generatedAt": "2025-10-29T12:00:00Z",
    "totalEndpoints": 71,
    "covered": 48,
    "missing": 23,
    "incorrect": 12,
    "coveragePercentage": 68
  },
  "features": [
    {
      "name": "Authentication",
      "coverage": 80,
      "missing": ["GET /api/v1/profile", "PATCH /api/v1/profile"],
      "incorrect": ["User ID type should be string not number"],
      "notes": ["Auth endpoints exist but profile management missing"]
    },
    {
      "name": "Bookings / Appointments",
      "coverage": 60,
      "missing": [
        "GET /api/v1/bookings/availability",
        "GET /api/v1/profile/bookings",
        "POST /api/v1/bookings/validate-promo",
        "POST /api/v1/admin/appointments/bulk-delete",
        "POST /api/v1/admin/appointments/bulk-update"
      ],
      "incorrect": ["Date format ambiguous", "Search param not documented"],
      "notes": ["CRITICAL: Availability check needed for booking flow"]
    },
    {
      "name": "Services",
      "coverage": 90,
      "missing": [],
      "incorrect": ["Category filter query param unclear"],
      "notes": ["Well covered, minor clarification needed"]
    },
    {
      "name": "Branches",
      "coverage": 80,
      "missing": ["GET /api/v1/branches/nearby"],
      "incorrect": ["Location object structure mismatch"],
      "notes": ["Nearby search for map feature missing"]
    },
    {
      "name": "Staff / Therapists",
      "coverage": 70,
      "missing": [
        "GET /api/v1/staff/available",
        "GET /api/v1/admin/staff/:id/schedule",
        "POST /api/v1/admin/staff/ai-generate-bio"
      ],
      "incorrect": ["Specialties should be array not string"],
      "notes": ["Public filtering endpoint critical for booking"]
    },
    {
      "name": "Customers",
      "coverage": 85,
      "missing": [
        "GET /api/v1/admin/customers/:id/analytics",
        "POST /api/v1/admin/customers/bulk-delete"
      ],
      "incorrect": [],
      "notes": ["Retention analytics shown in UI but no API"]
    },
    {
      "name": "Reviews",
      "coverage": 85,
      "missing": ["GET /api/v1/admin/reviews/metrics"],
      "incorrect": ["Reply field missing in list response"],
      "notes": ["Analytics dashboard needs metrics endpoint"]
    },
    {
      "name": "Blog / Content",
      "coverage": 60,
      "missing": [
        "GET /api/v1/blog/:slug",
        "POST /api/v1/admin/blog/ai-generate"
      ],
      "incorrect": ["Tags field missing", "Search/filter params unclear"],
      "notes": ["FE uses slug routing, spec has ID routing"]
    },
    {
      "name": "Payments",
      "coverage": 70,
      "missing": [
        "GET /api/v1/admin/payments/export",
        "GET /api/v1/admin/payments/revenue-trend"
      ],
      "incorrect": ["Payment method should be enum"],
      "notes": ["Export and chart data endpoints missing"]
    },
    {
      "name": "Dashboard (Admin)",
      "coverage": 40,
      "missing": [
        "GET /api/v1/admin/dashboard/revenue-chart",
        "GET /api/v1/admin/dashboard/service-distribution"
      ],
      "incorrect": ["Metrics endpoint incomplete, missing fields"],
      "notes": ["ALL chart data hardcoded in FE, needs real APIs"]
    },
    {
      "name": "Uploads / Files",
      "coverage": 50,
      "missing": ["Folder-based routing"],
      "incorrect": ["URL format (absolute vs relative) unclear"],
      "notes": ["CRITICAL: Upload endpoint needs folder parameter"]
    },
    {
      "name": "Contact / Forms",
      "coverage": 0,
      "missing": ["POST /api/v1/contact"],
      "incorrect": [],
      "notes": ["Contact page route exists but no API"]
    }
  ],
  "apis": [
    {
      "feature": "Authentication",
      "name": "Client Register",
      "path": "/api/v1/auth/register",
      "method": "POST",
      "status": "ok",
      "evidence": [
        {
          "file": "apps/frontend/src/auth/useAuth.ts",
          "line": 108,
          "hint": "register method exists"
        }
      ]
    },
    {
      "feature": "Authentication",
      "name": "Client Login",
      "path": "/api/v1/auth/login",
      "method": "POST",
      "status": "ok",
      "evidence": [
        {
          "file": "apps/frontend/src/auth/useAuth.ts",
          "line": 76,
          "hint": "login method exists"
        }
      ]
    },
    {
      "feature": "Authentication",
      "name": "Google OAuth",
      "path": "/api/v1/auth/google",
      "method": "POST",
      "status": "incorrect",
      "evidence": [
        {
          "file": "apps/frontend/src/auth/useAuth.ts",
          "line": 178,
          "hint": "Client-side JWT parsing is insecure"
        }
      ]
    },
    {
      "feature": "Authentication",
      "name": "Get Profile",
      "path": "/api/v1/profile",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/client/pages/LoginPage.tsx",
          "line": 57,
          "hint": "TODO comment implies profile endpoint"
        }
      ]
    },
    {
      "feature": "Authentication",
      "name": "Update Profile",
      "path": "/api/v1/profile",
      "method": "PATCH",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/auth/useAuth.ts",
          "line": null,
          "hint": "Auth system implies profile editing"
        }
      ]
    },
    {
      "feature": "Bookings",
      "name": "Check Availability",
      "path": "/api/v1/bookings/availability",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/client/components/booking/AvailabilityIndicator.tsx",
          "line": 1,
          "hint": "Component shows green/yellow/red indicators"
        }
      ]
    },
    {
      "feature": "Bookings",
      "name": "Client Booking History",
      "path": "/api/v1/profile/bookings",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": null,
          "line": null,
          "hint": "Implied by auth system for client dashboard"
        }
      ]
    },
    {
      "feature": "Bookings",
      "name": "Validate Promo Code",
      "path": "/api/v1/bookings/validate-promo",
      "method": "POST",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/client/components/payment/PromoCodeInput.tsx",
          "line": 19,
          "hint": "Simulated API call comment"
        }
      ]
    },
    {
      "feature": "Bookings",
      "name": "Create Booking",
      "path": "/api/v1/bookings",
      "method": "POST",
      "status": "ok",
      "evidence": [
        {
          "file": "apps/frontend/src/client/components/booking/BookingUserInfo.tsx",
          "line": 29,
          "hint": "Form validation for name, email, phone"
        }
      ]
    },
    {
      "feature": "Staff",
      "name": "Get Available Staff",
      "path": "/api/v1/staff/available",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/client/components/booking/TherapistSelector.tsx",
          "line": 1,
          "hint": "Component filters staff by branch/service"
        },
        {
          "file": "apps/frontend/src/client/components/booking/QuickBooking.tsx",
          "line": 249,
          "hint": "TherapistSelector usage"
        }
      ]
    },
    {
      "feature": "Staff",
      "name": "Get Staff Schedule",
      "path": "/api/v1/admin/staff/:id/schedule",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/admin/pages/Staff.tsx",
          "line": 64,
          "hint": "handleViewSchedule function"
        }
      ]
    },
    {
      "feature": "Staff",
      "name": "AI Generate Bio",
      "path": "/api/v1/admin/staff/ai-generate-bio",
      "method": "POST",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/admin/pages/Staff.tsx",
          "line": 102,
          "hint": "Comment: Generate Bio button"
        }
      ]
    },
    {
      "feature": "Blog",
      "name": "Get Blog Post by Slug",
      "path": "/api/v1/blog/:slug",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/client/pages/BlogDetailPage.tsx",
          "line": 7,
          "hint": "Mock data uses slug lookup"
        }
      ]
    },
    {
      "feature": "Blog",
      "name": "AI Generate Content",
      "path": "/api/v1/admin/blog/ai-generate",
      "method": "POST",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/admin/pages/Blog.tsx",
          "line": 57,
          "hint": "handleAIContentGenerator function"
        }
      ]
    },
    {
      "feature": "Payments",
      "name": "Export Report",
      "path": "/api/v1/admin/payments/export",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/admin/pages/Payments.tsx",
          "line": 112,
          "hint": "handleExportReport function"
        }
      ]
    },
    {
      "feature": "Payments",
      "name": "Revenue Trend Chart",
      "path": "/api/v1/admin/payments/revenue-trend",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/admin/pages/Payments.tsx",
          "line": 17,
          "hint": "revenueData hardcoded array"
        }
      ]
    },
    {
      "feature": "Dashboard",
      "name": "Revenue Chart Data",
      "path": "/api/v1/admin/dashboard/revenue-chart",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/admin/pages/Dashboard.tsx",
          "line": 16,
          "hint": "bookingData hardcoded for 7 days"
        }
      ]
    },
    {
      "feature": "Dashboard",
      "name": "Service Distribution",
      "path": "/api/v1/admin/dashboard/service-distribution",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/admin/pages/Dashboard.tsx",
          "line": 47,
          "hint": "serviceData for pie chart"
        }
      ]
    },
    {
      "feature": "Dashboard",
      "name": "Get Metrics",
      "path": "/api/v1/admin/dashboard/metrics",
      "method": "GET",
      "status": "incorrect",
      "evidence": [
        {
          "file": "apps/frontend/src/admin/pages/Dashboard.tsx",
          "line": 69,
          "hint": "Missing fields: bookingsChange, revenueChange, etc."
        }
      ]
    },
    {
      "feature": "Reviews",
      "name": "Get Review Metrics",
      "path": "/api/v1/admin/reviews/metrics",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/admin/pages/Reviews.tsx",
          "line": 109,
          "hint": "Hardcoded: 248 total, 85% positive"
        }
      ]
    },
    {
      "feature": "Customers",
      "name": "Get Customer Analytics",
      "path": "/api/v1/admin/customers/:id/analytics",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/admin/pages/Customers.tsx",
          "line": 24,
          "hint": "retention: '95%' displayed"
        }
      ]
    },
    {
      "feature": "Branches",
      "name": "Find Nearby Branches",
      "path": "/api/v1/branches/nearby",
      "method": "GET",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/client/components/branches/BranchMap.tsx",
          "line": 29,
          "hint": "Comment about Google Maps API"
        }
      ]
    },
    {
      "feature": "Contact",
      "name": "Submit Contact Form",
      "path": "/api/v1/contact",
      "method": "POST",
      "status": "missing",
      "evidence": [
        {
          "file": "apps/frontend/src/client/pages/ContactPage.tsx",
          "line": null,
          "hint": "Route exists in route-map.tsx"
        }
      ]
    },
    {
      "feature": "Uploads",
      "name": "Upload Image",
      "path": "/api/v1/admin/uploads/:folder",
      "method": "POST",
      "status": "incorrect",
      "evidence": [
        {
          "file": null,
          "line": null,
          "hint": "All admin modals use image uploads"
        }
      ]
    }
  ],
  "fieldsDiff": [
    {
      "feature": "Authentication",
      "api": "All auth endpoints",
      "field": "user.id",
      "where": "response",
      "expected": "string (UUID)",
      "found": "number",
      "severity": "breaking"
    },
    {
      "feature": "Branches",
      "api": "GET /api/v1/branches",
      "field": "location",
      "where": "list",
      "expected": "{ lat: number, lng: number }",
      "found": "flat fields or unclear",
      "severity": "high"
    },
    {
      "feature": "Staff",
      "api": "GET /api/v1/admin/staff",
      "field": "specialties",
      "where": "list/detail",
      "expected": "string[]",
      "found": "string (comma-separated)",
      "severity": "high"
    },
    {
      "feature": "Blog",
      "api": "GET /api/v1/blog",
      "field": "tags",
      "where": "list/detail",
      "expected": "string[]",
      "found": "missing",
      "severity": "medium"
    },
    {
      "feature": "Customers",
      "api": "GET /api/v1/admin/customers",
      "field": "membershipTier",
      "where": "list",
      "expected": "new|silver|gold|vip (lowercase)",
      "found": "New|Silver|Gold|VIP (capitalized)",
      "severity": "low"
    },
    {
      "feature": "Appointments",
      "api": "POST /api/v1/bookings",
      "field": "date",
      "where": "body",
      "expected": "YYYY-MM-DD (date only)",
      "found": "ISO 8601 full timestamp unclear",
      "severity": "medium"
    },
    {
      "feature": "Appointments",
      "api": "POST /api/v1/bookings",
      "field": "time",
      "where": "body",
      "expected": "HH:mm (time only)",
      "found": "unclear format",
      "severity": "medium"
    },
    {
      "feature": "Payments",
      "api": "GET /api/v1/admin/payments",
      "field": "method",
      "where": "list",
      "expected": "credit_card|cash|digital_wallet|bank_transfer",
      "found": "string (no enum)",
      "severity": "medium"
    },
    {
      "feature": "Reviews",
      "api": "GET /api/v1/admin/reviews",
      "field": "reply",
      "where": "list",
      "expected": "string|null + replied: boolean",
      "found": "missing",
      "severity": "low"
    },
    {
      "feature": "Uploads",
      "api": "POST /api/v1/admin/uploads",
      "field": "url",
      "where": "response",
      "expected": "absolute URL (https://...)",
      "found": "unclear if relative or absolute",
      "severity": "high"
    },
    {
      "feature": "Dashboard",
      "api": "GET /api/v1/admin/dashboard/metrics",
      "field": "bookingsChange",
      "where": "response",
      "expected": "number (percentage)",
      "found": "missing",
      "severity": "high"
    },
    {
      "feature": "Services",
      "api": "GET /api/v1/services",
      "field": "category",
      "where": "query",
      "expected": "?category=Facial|Massage|Hair|Nails|Body",
      "found": "unclear query param format",
      "severity": "low"
    }
  ]
}
